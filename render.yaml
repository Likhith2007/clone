services:
  - type: web
    name: omegle-backend
    env: python
    buildCommand: |
      pip install --upgrade pip
      pip install -r omegle1-main/backend/requirements.txt
    startCommand: |
      cd omegle1-main/backend
      uvicorn server:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: PYTHON_VERSION
        value: 3.9.0
      - key: PORT
        value: 10000
      - key: HOST
        value: 0.0.0.0
      - key: ALLOWED_ORIGINS
        value: "*"
    plan: free

  - type: web
    name: omegle-frontend
    env: node
    buildCommand: |
      cd omegle1-main/frontend
      npm install --legacy-peer-deps
      npm run build
    startCommand: |
      cd omegle1-main/frontend
      npm run serve
    envVars:
      - key: NODE_VERSION
        value: 20.18.0
      - key: PORT
        value: 3000
      - key: REACT_APP_BACKEND_URL
        value: https://omegle1-9zb1.onrender.com
    plan: free

